#summary Principe de fonctionnement du protocole InOneByLegrand.
#labels Featured,Phase-Requirements,Phase-Design

== INTRODUCTION ==

Le fonctionnement du protocole peut paraitre simple lorsqu'il est programmÃ© par un "Utilisateur" Ã  lâ€™aide des boutons sur les Ã©quipements, mais dÃ¨s que lâ€™on souhaite interroger sur le BUS les Ã©quipements, la rÃ©alitÃ© est diffÃ©rente et on se perd vite avec les questions : 

 * Qui parle Ã  qui ?
 * Qui Ã©coute qui ?
 * Dans quel sens vont les informations ?
 * Qui contient la programmation du scÃ©nario ?
 * Etcâ€¦

== LES LIAISONS PHYSIQUES ==

Il en existe trois diffÃ©rentes :
  * Le CPL (Courant Porteur en Ligne) les informations transitent sur l'installation Ã©lectrique. Conditions obligatoires :
    # que lâ€™Ã©quipement soit reliÃ© Ã  lâ€™aide de la phase et du neutre
    # que la portÃ©e soit infÃ©rieur Ã  50 mÃ¨tres, au-delÃ  les transmissions peuvent devenir hasardeuse. Ce qui signifie quâ€™un interrupteur qui est Ã  25 m de cÃ¢ble du tableau peut rencontrer des difficultÃ©s pour envoyer un ordre Ã  un interrupteur situÃ© Ã©galement Ã  25 m (25m + 25m = 50m), etc.   
  * Le RF (Radio FrÃ©quence) les informations sont envoyÃ©es en Radio mais elles peuvent Ãªtre transmises sur le CPL grÃ¢ce Ã  lâ€™interface rÃ©fÃ©rence 3600
  * Lâ€™IR (Infra-Rouge) destinÃ© aux tÃ©lÃ©commandes, les informations sont interprÃ©tÃ©es par les Ã©quipements qui possÃ¨dent une cellule Infrarouge mais elles peuvent Ã©galement Ãªtre retransmises sur le CPL par certains Ã©quipements

== LE SENS DE COMMUNICATION ==

Les Ã©quipements sont divisÃ©s en trois catÃ©gories :
  # Les Emetteurs, ils envoient des ordres sur le BUS
  # Les RÃ©cepteurs, ils Ã©coutent les messages qui circulent sur le BUS
  # Les Emetteurs/RÃ©cepteurs, ils envoient et Ã©coutent les messages sur le BUS

== LES UNITES ET MODULES ==

Les Ã©quipements peuvent Ãªtre Ã©quipÃ©s de un ou plusieurs modules selon leur nature. Par exemple un interrupteur double possÃ¨de deux modules.
Chaque module dâ€™un Ã©quipement est composÃ© dâ€™une ou plusieurs unitÃ©s. Les unitÃ©s sont des rÃ©fÃ©rences sur des fonctions de lâ€™Ã©quipement.
  * Dans le cas dâ€™un interrupteur simple Ã©metteur il nâ€™y a quâ€™un module dâ€™une seul unitÃ©
  * Dans le cas dâ€™un interrupteur simple Ã©metteur/rÃ©cepteur il nâ€™y a quâ€™un module mais il est composÃ© de deux unitÃ©s. La premiÃ¨re unitÃ© est principalement utilisÃ©e pour Ã©mettre les ordres, la seconde unitÃ© permet dâ€™enregistrÃ©e les Ã©quipements associÃ©s.
Exemples :
  * Inter Simple RF : 1 unitÃ©
  * Inter Simple Ã©metteur/rÃ©cepteur CPL : 2 unitÃ©s
  * Inter Double Ã©metteur/rÃ©cepteur CPL : 4 unitÃ©s
  * TÃ©lÃ©commande Interscenario 8 actions RF : 8 unitÃ©s

== Lâ€™ENVOI ET LA RECEPTION Dâ€™ORDES ==

Lâ€™IOBL fonctionne sur un procÃ©dÃ© de Â« Broadcast Â» il nâ€™y a pas de dâ€™Ã©change Ã©tablie entre deux Ã©quipements. Chaque Ã©quipement envoi une commande Â« Ã  qui veux lâ€™entendre Â», chaque commande qui circule sur le BUS est lu par tous les Ã©quipements et si un Ã©quipement est Â« concernÃ© Â» par la commande il rÃ©agira en fonction de celle-ci.
Câ€™est pour cette raison quâ€™il arrive que des ordres se perdent, lorsque deux interrupteur sont associÃ©s il nâ€™y a pas de vÃ©rification si la commande est bien reÃ§u.
Une action est se dÃ©roule ainsi, lorsquâ€™un interrupteur est associÃ© Ã  un autre :
  # Interrupteur 1, appui sur la touche ON
  # Interrupteur 1, envoie sur le BUS Â« INTER1 ON Â»
  # Interrupteur 2, lecture sur le BUS Â« INTER1 ON Â»
  # Interrupteur 2, si programmÃ© pour Â« INTER1 ON Â» alors changement de lâ€™Ã©tat Ã  ON

== LA PROGRAMATION DES EQUIPEMENTS ==

Pour rappel les Ã©quipements ne sâ€™adresse pas directement entre eux mais indique une action, ils sont alors Ã©metteurs.
La programmation se fait donc uniquement sur les rÃ©cepteurs, par exemple un interscenario ne contient pas la programmation des Ã©quipements qui rÃ©agissent Ã  ces actions car il est Ã©metteur dâ€™ordre. Ce sont les Ã©quipements rÃ©cepteurs qui ont enregistrÃ©s en mÃ©moire quâ€™il devait rÃ©agir Ã  lâ€™interscenario.

  * Les plus : 
    * AllÃ©ger considÃ©rablement le BUS, une seule commande pour rÃ©aliser plusieurs dâ€™action
    * Le nombres dâ€™action peut Ãªtre infinie
    * Si un Ã©quipement est supprimÃ© de lâ€™installation il nâ€™y a pas de reprogrammation Ã  rÃ©aliser

  * Les moins : 
    * Impossible de savoir Ã  qui sâ€™adresse une action sans connaitre la programmation de tous les rÃ©cepteurs associÃ©s
    * Si un Ã©metteurs est supprimÃ© de lâ€™installation, les rÃ©cepteurs ne peuvent plus le dÃ©programmÃ© (sauf programmation directement sur le BUS ou reset des rÃ©cepteurs)

La programmation se fait donc sur les rÃ©cepteur, un unit est rÃ©servÃ© Ã  la programmation de chaque module. Chaque unit de programmation contient 16 ou 32 blocs de mÃ©moires en fonction de lâ€™Ã©quipement, câ€™est pourquoi un rÃ©cepteur ne participer Ã  plus de 16 ou 32 scÃ©narios.